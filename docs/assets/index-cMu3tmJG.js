(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class pt{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class J{constructor(e){this.generateIdentifier=e,this.kv=new pt}register(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class _t extends J{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(e,n.allowProps),super.register(e,n.identifier)):super.register(e,n)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function wt(t){if("values"in Object)return Object.values(t);const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function vt(t,e){const n=wt(t);if("find"in n)return n.find(e);const r=n;for(let s=0;s<r.length;s++){const o=r[s];if(e(o))return o}}function O(t,e){Object.entries(t).forEach(([n,r])=>e(r,n))}function q(t,e){return t.indexOf(e)!==-1}function H(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(e(r))return r}}class kt{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return vt(this.transfomers,n=>n.isApplicable(e))}findByName(e){return this.transfomers[e]}}const Mt=t=>Object.prototype.toString.call(t).slice(8,-1),tt=t=>typeof t>"u",Et=t=>t===null,N=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,j=t=>N(t)&&Object.keys(t).length===0,k=t=>Array.isArray(t),St=t=>typeof t=="string",Pt=t=>typeof t=="number"&&!isNaN(t),At=t=>typeof t=="boolean",It=t=>t instanceof RegExp,F=t=>t instanceof Map,T=t=>t instanceof Set,et=t=>Mt(t)==="Symbol",Ot=t=>t instanceof Date&&!isNaN(t.valueOf()),nt=t=>t instanceof Error,Q=t=>typeof t=="number"&&isNaN(t),xt=t=>At(t)||Et(t)||tt(t)||Pt(t)||St(t)||et(t),Rt=t=>typeof t=="bigint",Nt=t=>t===1/0||t===-1/0,Ft=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),Tt=t=>t instanceof URL,K=t=>t.replace(/\\/g,"\\\\").replace(/\./g,"\\."),C=t=>t.map(String).map(K).join("."),R=(t,e)=>{const n=[];let r="";for(let o=0;o<t.length;o++){let i=t.charAt(o);if(!e&&i==="\\"){const l=t.charAt(o+1);if(l==="\\"){r+="\\",o++;continue}else if(l!==".")throw Error("invalid path")}if(i==="\\"&&t.charAt(o+1)==="."){r+=".",o++;continue}if(i==="."){n.push(r),r="";continue}r+=i}const s=r;return n.push(s),n};function _(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}const rt=[_(tt,"undefined",()=>null,()=>{}),_(Rt,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),_(Ot,"Date",t=>t.toISOString(),t=>new Date(t)),_(nt,"Error",(t,e)=>{const n={name:t.name,message:t.message};return"cause"in t&&(n.cause=t.cause),e.allowedErrorProps.forEach(r=>{n[r]=t[r]}),n},(t,e)=>{const n=new Error(t.message,{cause:t.cause});return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(r=>{n[r]=t[r]}),n}),_(It,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),_(T,"set",t=>[...t.values()],t=>new Set(t)),_(F,"map",t=>[...t.entries()],t=>new Map(t)),_(t=>Q(t)||Nt(t),"number",t=>Q(t)?"NaN":t>0?"Infinity":"-Infinity",Number),_(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),_(Tt,"URL",t=>t.toString(),t=>new URL(t))];function L(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}const st=L((t,e)=>et(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,n)=>{const r=n.symbolRegistry.getValue(e[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),Vt=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),ot=L(Ft,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const n=Vt[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function it(t,e){return t?.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const at=L(it,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return{...t};const r={};return n.forEach(s=>{r[s]=t[s]}),r},(t,e,n)=>{const r=n.classRegistry.getValue(e[1]);if(!r)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(r.prototype),t)}),ct=L((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,n)=>{const r=n.customTransformerRegistry.findByName(e[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(t)}),qt=[at,st,ct,ot],Y=(t,e)=>{const n=H(qt,s=>s.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};const r=H(rt,s=>s.isApplicable(t,e));if(r)return{value:r.transform(t,e),type:r.annotation}},lt={};rt.forEach(t=>{lt[t.annotation]=t});const zt=(t,e,n)=>{if(k(e))switch(e[0]){case"symbol":return st.untransform(t,e,n);case"class":return at.untransform(t,e,n);case"custom":return ct.untransform(t,e,n);case"typed-array":return ot.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{const r=lt[e];if(!r)throw new Error("Unknown transformation: "+e);return r.untransform(t,n)}},P=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const n=t.keys();for(;e>0;)n.next(),e--;return n.next().value};function ut(t){if(q(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(q(t,"prototype"))throw new Error("prototype is not allowed as a property");if(q(t,"constructor"))throw new Error("constructor is not allowed as a property")}const Bt=(t,e)=>{ut(e);for(let n=0;n<e.length;n++){const r=e[n];if(T(t))t=P(t,+r);else if(F(t)){const s=+r,o=+e[++n]==0?"key":"value",i=P(t,s);switch(o){case"key":t=i;break;case"value":t=t.get(i);break}}else t=t[r]}return t},U=(t,e,n)=>{if(ut(e),e.length===0)return n(t);let r=t;for(let o=0;o<e.length-1;o++){const i=e[o];if(k(r)){const a=+i;r=r[a]}else if(N(r))r=r[i];else if(T(r)){const a=+i;r=P(r,a)}else if(F(r)){if(o===e.length-2)break;const c=+i,l=+e[++o]==0?"key":"value",f=P(r,c);switch(l){case"key":r=f;break;case"value":r=r.get(f);break}}}const s=e[e.length-1];if(k(r)?r[+s]=n(r[+s]):N(r)&&(r[s]=n(r[s])),T(r)){const o=P(r,+s),i=n(o);o!==i&&(r.delete(o),r.add(i))}if(F(r)){const o=+e[e.length-2],i=P(r,o);switch(+s==0?"key":"value"){case"key":{const c=n(i);r.set(c,r.get(i)),c!==i&&r.delete(i);break}case"value":{r.set(i,n(r.get(i)));break}}}return t},ft=t=>t<1;function $(t,e,n,r=[]){if(!t)return;const s=ft(n);if(!k(t)){O(t,(a,c)=>$(a,e,n,[...r,...R(c,s)]));return}const[o,i]=t;i&&O(i,(a,c)=>{$(a,e,n,[...r,...R(c,s)])}),e(o,r)}function Lt(t,e,n,r){return $(e,(s,o)=>{t=U(t,o,i=>zt(i,s,r))},n),t}function Ct(t,e,n){const r=ft(n);function s(o,i){const a=Bt(t,R(i,r));o.map(c=>R(c,r)).forEach(c=>{t=U(t,c,()=>a)})}if(k(e)){const[o,i]=e;o.forEach(a=>{t=U(t,R(a,r),()=>t)}),i&&O(i,s)}else O(e,s);return t}const Dt=(t,e)=>N(t)||k(t)||F(t)||T(t)||nt(t)||it(t,e);function jt(t,e,n){const r=n.get(t);r?r.push(e):n.set(t,[e])}function Kt(t,e){const n={};let r;return t.forEach(s=>{if(s.length<=1)return;e||(s=s.map(a=>a.map(String)).sort((a,c)=>a.length-c.length));const[o,...i]=s;o.length===0?r=i.map(C):n[C(o)]=i.map(C)}),r?j(n)?[r]:[r,n]:j(n)?void 0:n}const ht=(t,e,n,r,s=[],o=[],i=new Map)=>{const a=xt(t);if(!a){jt(t,s,e);const g=i.get(t);if(g)return r?{transformedValue:null}:g}if(!Dt(t,n)){const g=Y(t,n),y=g?{transformedValue:g.value,annotations:[g.type]}:{transformedValue:t};return a||i.set(t,y),y}if(q(o,t))return{transformedValue:null};const c=Y(t,n),l=c?.value??t,f=k(l)?[]:{},h={};O(l,(g,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const p=ht(g,e,n,r,[...s,y],[...o,t],i);f[y]=p.transformedValue,k(p.annotations)?h[K(y)]=p.annotations:N(p.annotations)&&O(p.annotations,(M,E)=>{h[K(y)+"."+E]=M})});const m=j(h)?{transformedValue:f,annotations:c?[c.type]:void 0}:{transformedValue:f,annotations:c?[c.type,h]:h};return a||i.set(t,m),m};function dt(t){return Object.prototype.toString.call(t).slice(8,-1)}function X(t){return dt(t)==="Array"}function Ut(t){if(dt(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function $t(t,e,n,r,s){const o={}.propertyIsEnumerable.call(r,e)?"enumerable":"nonenumerable";o==="enumerable"&&(t[e]=n),s&&o==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function W(t,e={}){if(X(t))return t.map(s=>W(s,e));if(!Ut(t))return t;const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertySymbols(t);return[...n,...r].reduce((s,o)=>{if(o==="__proto__"||X(e.props)&&!e.props.includes(o))return s;const i=t[o],a=W(i,e);return $t(s,o,a,t,e.nonenumerable),s},{})}class d{constructor({dedupe:e=!1}={}){this.classRegistry=new _t,this.symbolRegistry=new J(n=>n.description??""),this.customTransformerRegistry=new kt,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const n=new Map,r=ht(e,n,this,this.dedupe),s={json:r.transformedValue};r.annotations&&(s.meta={...s.meta,values:r.annotations});const o=Kt(n,this.dedupe);return o&&(s.meta={...s.meta,referentialEqualities:o}),s.meta&&(s.meta.v=1),s}deserialize(e,n){const{json:r,meta:s}=e;let o=n?.inPlace?r:W(r);return s?.values&&(o=Lt(o,s.values,s.v??0,this)),s?.referentialEqualities&&(o=Ct(o,s.referentialEqualities,s.v??0)),o}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e),{inPlace:!0})}registerClass(e,n){this.classRegistry.register(e,n)}registerSymbol(e,n){this.symbolRegistry.register(e,n)}registerCustom(e,n){this.customTransformerRegistry.register({name:n,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}d.defaultInstance=new d;d.serialize=d.defaultInstance.serialize.bind(d.defaultInstance);d.deserialize=d.defaultInstance.deserialize.bind(d.defaultInstance);d.stringify=d.defaultInstance.stringify.bind(d.defaultInstance);d.parse=d.defaultInstance.parse.bind(d.defaultInstance);d.registerClass=d.defaultInstance.registerClass.bind(d.defaultInstance);d.registerSymbol=d.defaultInstance.registerSymbol.bind(d.defaultInstance);d.registerCustom=d.defaultInstance.registerCustom.bind(d.defaultInstance);d.allowErrorProps=d.defaultInstance.allowErrorProps.bind(d.defaultInstance);d.serialize;d.deserialize;d.stringify;d.parse;d.registerClass;d.registerCustom;d.registerSymbol;d.allowErrorProps;class z{static version="6.0.3";static superjson=d;itemName;defaultValue;encodeFn;decodeFn;storage;#t;constructor(e,n,r={}){const{encodeFn:s,decodeFn:o,storage:i=window.localStorage}=r;if(typeof e!="string")throw new TypeError("itemName is not a string");if(this.itemName=e,this.defaultValue=n,s&&typeof s!="function")throw new TypeError("encodeFn is defined but is not a function");if(this.encodeFn=s||(a=>z.superjson.stringify(a)),o&&typeof o!="function")throw new TypeError("decodeFn is defined but is not a function");if(this.decodeFn=o||(a=>z.superjson.parse(a)),!(i instanceof Storage))throw new TypeError("storage must be an instance of Storage");this.storage=i,this.sync()}set value(e){this.#t=e,this.storage.setItem(this.itemName,this.encodeFn(e))}get value(){return this.#t}set(e,n){return typeof e=="function"?this.value=e(this.#t):this.value={...this.#t,[e]:n}}sync(e=this.decodeFn){let n=this.storage.getItem(this.itemName);if(typeof n!="string")return this.reset();try{return this.value=e(n)}catch(r){return console.error(r),this.reset(),r}}reset(){return this.value=this.defaultValue}isDefault(){return this.#t===this.defaultValue}}class Wt{errors=[];validators=[];form;constructor(e){this.form=e,this.resetSummary(),this.form.addEventListener("submit",n=>this.onSubmit(n))}onLoad(){this.resetSummary(),this.removeInlineErrors()}onSubmit(e){this.onLoad(),this.validate()||(e.preventDefault(),e.stopImmediatePropagation(),this.showSummary(),this.showInlineErrors())}validate(){return this.validators.forEach(e=>{if(!e.method(e.field)){if(this.errors.map(n=>n.name).includes(e.name))return;this.errors.push(e)}}),this.errors.length===0}addValidator(e){const n=this.form.elements.namedItem(e.name);n&&this.validators.push({field:n,...e})}createInlineError(e){const n=document.createElement("span");return n.classList.add("field-error"),n.innerText=e.message,n.setAttribute("id",e.name+"-error"),n}showInlineErrors(){this.errors.forEach(e=>{const n=this.createInlineError(e),r=e.field;if(r instanceof Element){if(r.classList.add("invalid"),r.setAttribute("aria-invalid","true"),!("labels"in r&&r.labels instanceof NodeList))return;const s=r.labels[0];s.insertBefore(n,s.lastElementChild)}else r instanceof RadioNodeList&&r.forEach(s=>{s.classList.add("invalid"),s.setAttribute("aria-describedby",n.id),s.setAttribute("aria-invalid","true");const i=r[0].closest("fieldset")?.querySelector("legend");i&&i.appendChild(n)})})}removeInlineErrors(){this.form.querySelectorAll(".field-error").forEach(e=>e.remove()),this.form.querySelectorAll(".invalid").forEach(e=>{e.removeAttribute("aria-describedby"),e.removeAttribute("aria-invalid"),e.classList.remove("invalid")}),this.errors=[]}resetSummary(){const e=this.form.querySelector(".error-summary");e&&(e.style.display="none",e.querySelector("ul").innerHTML="")}showSummary(){const e=this.form.querySelector(".error-summary");if(!e)return;const n=e.querySelector("ul");n&&(this.errors.forEach(r=>{const s=document.createElement("a");s.href="#"+r.name,s.innerText=r.message,s.addEventListener("click",i=>{i.preventDefault();const a=i.currentTarget;if(!a)return;const c=a.getAttribute("href");if(!c)return;const l=document.querySelector(c);l&&(l.focus(),l.scrollIntoView({behavior:"smooth",block:"center"}))});const o=document.createElement("li");o.appendChild(s),n.appendChild(o)}),e.tabIndex=-1,e.style.display="block",e.focus())}}const G={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const t in G)Object.freeze(G[t]);const V=Object.freeze(G),mt={};for(const t of Object.keys(V))mt[V[t]]=t;const u={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},v=(6/29)**3;function A(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function I(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(u)){if(!("channels"in u[t]))throw new Error("missing channels property: "+t);if(!("labels"in u[t]))throw new Error("missing channel labels property: "+t);if(u[t].labels.length!==u[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=u[t];delete u[t].channels,delete u[t].labels,Object.defineProperty(u[t],"channels",{value:e}),Object.defineProperty(u[t],"labels",{value:n})}u.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(e,n,r),o=Math.max(e,n,r),i=o-s;let a,c;switch(o){case s:{a=0;break}case e:{a=(n-r)/i;break}case n:{a=2+(r-e)/i;break}case r:{a=4+(e-n)/i;break}}a=Math.min(a*60,360),a<0&&(a+=360);const l=(s+o)/2;return o===s?c=0:l<=.5?c=i/(o+s):c=i/(2-o-s),[a,c*100,l*100]};u.rgb.hsv=function(t){let e,n,r,s,o;const i=t[0]/255,a=t[1]/255,c=t[2]/255,l=Math.max(i,a,c),f=l-Math.min(i,a,c),h=function(m){return(l-m)/6/f+1/2};if(f===0)s=0,o=0;else{switch(o=f/l,e=h(i),n=h(a),r=h(c),l){case i:{s=r-n;break}case a:{s=1/3+e-r;break}case c:{s=2/3+n-e;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,o*100,l*100]};u.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const s=u.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[s,o*100,r*100]};u.rgb.oklab=function(t){const e=I(t[0]/255),n=I(t[1]/255),r=I(t[2]/255),s=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*r),o=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*r),i=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*r),a=.2104542553*s+.793617785*o-.0040720468*i,c=1.9779984951*s-2.428592205*o+.4505937099*i,l=.0259040371*s+.7827717662*o-.808675766*i;return[a*100,c*100,l*100]};u.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(1-e,1-n,1-r),o=(1-e-s)/(1-s)||0,i=(1-n-s)/(1-s)||0,a=(1-r-s)/(1-s)||0;return[o*100,i*100,a*100,s*100]};function Gt(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}u.rgb.keyword=function(t){const e=mt[t];if(e)return e;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(V)){const o=V[s],i=Gt(t,o);i<n&&(n=i,r=s)}return r};u.keyword.rgb=function(t){return[...V[t]]};u.rgb.xyz=function(t){const e=I(t[0]/255),n=I(t[1]/255),r=I(t[2]/255),s=e*.4124564+n*.3575761+r*.1804375,o=e*.2126729+n*.7151522+r*.072175,i=e*.0193339+n*.119192+r*.9503041;return[s*100,o*100,i*100]};u.rgb.lab=function(t){const e=u.rgb.xyz(t);let n=e[0],r=e[1],s=e[2];n/=95.047,r/=100,s/=108.883,n=n>v?n**(1/3):7.787*n+16/116,r=r>v?r**(1/3):7.787*r+16/116,s=s>v?s**(1/3):7.787*s+16/116;const o=116*r-16,i=500*(n-r),a=200*(r-s);return[o,i,a]};u.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let s,o;if(n===0)return o=r*255,[o,o,o];const i=r<.5?r*(1+n):r+n-r*n,a=2*r-i,c=[0,0,0];for(let l=0;l<3;l++)s=e+1/3*-(l-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,c[l]=o*255;return c};u.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,s=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=o<=1?o:2-o;const i=(r+n)/2,a=r===0?2*s/(o+s):2*n/(r+n);return[e,a*100,i*100]};u.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const s=Math.floor(e)%6,o=e-Math.floor(e),i=255*r*(1-n),a=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,s){case 0:return[r,c,i];case 1:return[a,r,i];case 2:return[i,r,c];case 3:return[i,a,r];case 4:return[c,i,r];case 5:return[r,i,a]}};u.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,s=Math.max(r,.01);let o,i;i=(2-n)*r;const a=(2-n)*s;return o=n*s,o/=a<=1?a:2-a,o=o||0,i/=2,[e,o*100,i*100]};u.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const s=n+r;let o;s>1&&(n/=s,r/=s);const i=Math.floor(6*e),a=1-r;o=6*e-i,(i&1)!==0&&(o=1-o);const c=n+o*(a-n);let l,f,h;switch(i){default:case 6:case 0:{l=a,f=c,h=n;break}case 1:{l=c,f=a,h=n;break}case 2:{l=n,f=a,h=c;break}case 3:{l=n,f=c,h=a;break}case 4:{l=c,f=n,h=a;break}case 5:{l=a,f=n,h=c;break}}return[l*255,f*255,h*255]};u.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=t[3]/100,o=1-Math.min(1,e*(1-s)+s),i=1-Math.min(1,n*(1-s)+s),a=1-Math.min(1,r*(1-s)+s);return[o*255,i*255,a*255]};u.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let s,o,i;return s=e*3.2404542+n*-1.5371385+r*-.4985314,o=e*-.969266+n*1.8760108+r*.041556,i=e*.0556434+n*-.2040259+r*1.0572252,s=A(s),o=A(o),i=A(i),[s*255,o*255,i*255]};u.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>v?e**(1/3):7.787*e+16/116,n=n>v?n**(1/3):7.787*n+16/116,r=r>v?r**(1/3):7.787*r+16/116;const s=116*n-16,o=500*(e-n),i=200*(n-r);return[s,o,i]};u.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*r),o=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*r),i=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*r),a=.2104542553*s+.793617785*o-.0040720468*i,c=1.9779984951*s-2.428592205*o+.4505937099*i,l=.0259040371*s+.7827717662*o-.808675766*i;return[a*100,c*100,l*100]};u.oklab.oklch=function(t){return u.lab.lch(t)};u.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=(.999999998*e+.396337792*n+.215803758*r)**3,o=(1.000000008*e-.105561342*n-.063854175*r)**3,i=(1.000000055*e-.089484182*n-1.291485538*r)**3,a=1.227013851*s-.55779998*o+.281256149*i,c=-.040580178*s+1.11225687*o-.071676679*i,l=-.076381285*s-.421481978*o+1.58616322*i;return[a*100,c*100,l*100]};u.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=(e+.3963377774*n+.2158037573*r)**3,o=(e-.1055613458*n-.0638541728*r)**3,i=(e-.0894841775*n-1.291485548*r)**3,a=A(4.0767416621*s-3.3077115913*o+.2309699292*i),c=A(-1.2684380046*s+2.6097574011*o-.3413193965*i),l=A(-.0041960863*s-.7034186147*o+1.707614701*i);return[a*255,c*255,l*255]};u.oklch.oklab=function(t){return u.lch.lab(t)};u.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let s,o,i;o=(e+16)/116,s=n/500+o,i=o-r/200;const a=o**3,c=s**3,l=i**3;return o=a>v?a:(o-16/116)/7.787,s=c>v?c:(s-16/116)/7.787,i=l>v?l:(i-16/116)/7.787,s*=95.047,o*=100,i*=108.883,[s,o,i]};u.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(n*n+r*r);return[e,i,s]};u.lch.lab=function(t){const e=t[0],n=t[1],s=t[2]/360*2*Math.PI,o=n*Math.cos(s),i=n*Math.sin(s);return[e,o,i]};u.rgb.ansi16=function(t,e=null){const[n,r,s]=t;let o=e===null?u.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),o===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return o===2&&(i+=60),i};u.hsv.ansi16=function(t){return u.rgb.ansi16(u.hsv.rgb(t),t[2])};u.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e>>4===n>>4&&n>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};u.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,r=(e&1)*n*255,s=(e>>1&1)*n*255,o=(e>>2&1)*n*255;return[r,s,o]};u.ansi256.rgb=function(t){if(t=t[0],t>=232){const o=(t-232)*10+8;return[o,o,o]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,s=e%6/5*255;return[n,r,s]};u.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};u.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(a=>a+a).join(""));const r=Number.parseInt(n,16),s=r>>16&255,o=r>>8&255,i=r&255;return[s,o,i]};u.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(Math.max(e,n),r),o=Math.min(Math.min(e,n),r),i=s-o;let a;const c=i<1?o/(1-i):0;return i<=0?a=0:s===e?a=(n-r)/i%6:s===n?a=2+(r-e)/i:a=4+(e-n)/i,a/=6,a%=1,[a*360,i*100,c*100]};u.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[t[0],r*100,s*100]};u.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[t[0],r*100,s*100]};u.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],o=e%1*6,i=o%1,a=1-i;let c=0;switch(Math.floor(o)){case 0:{s[0]=1,s[1]=i,s[2]=0;break}case 1:{s[0]=a,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=i;break}case 3:{s[0]=0,s[1]=a,s[2]=1;break}case 4:{s[0]=i,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=a}return c=(1-n)*r,[(n*s[0]+c)*255,(n*s[1]+c)*255,(n*s[2]+c)*255]};u.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let s=0;return r>0&&(s=e/r),[t[0],s*100,r*100]};u.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let s=0;return r>0&&r<.5?s=e/(2*r):r>=.5&&r<1&&(s=e/(2*(1-r))),[t[0],s*100,r*100]};u.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]};u.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,s=r-e;let o=0;return s<1&&(o=(r-s)/(1-s)),[t[0],s*100,o*100]};u.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};u.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};u.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};u.gray.hsl=function(t){return[0,0,t[0]]};u.gray.hsv=u.gray.hsl;u.gray.hwb=function(t){return[0,100,t[0]]};u.gray.cmyk=function(t){return[0,0,0,t[0]]};u.gray.lab=function(t){return[t[0],0,0]};u.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};u.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function Ht(){const t={},e=Object.keys(u);for(let{length:n}=e,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function Qt(t){const e=Ht(),n=[t];for(e[t].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(u[r]);for(let{length:o}=s,i=0;i<o;i++){const a=s[i],c=e[a];c.distance===-1&&(c.distance=e[r].distance+1,c.parent=r,n.unshift(a))}}return e}function Yt(t,e){return function(n){return e(t(n))}}function Xt(t,e){const n=[e[t].parent,t];let r=u[e[t].parent][t],s=e[t].parent;for(;e[s].parent;)n.unshift(e[s].parent),r=Yt(u[e[s].parent][s],r),s=e[s].parent;return r.conversion=n,r}function Zt(t){const e=Qt(t),n={},r=Object.keys(e);for(let{length:s}=r,o=0;o<s;o++){const i=r[o];e[i].parent!==null&&(n[i]=Xt(i,e))}return n}const b={},Jt=Object.keys(u);function te(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function ee(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=t(n);if(typeof s=="object")for(let{length:o}=s,i=0;i<o;i++)s[i]=Math.round(s[i]);return s};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of Jt){b[t]={},Object.defineProperty(b[t],"channels",{value:u[t].channels}),Object.defineProperty(b[t],"labels",{value:u[t].labels});const e=Zt(t),n=Object.keys(e);for(const r of n){const s=e[r];b[t][r]=ee(s),b[t][r].raw=te(s)}}class w{values;N;distMatrix;path;constructor(e,n=1){this.values=e.slice(),this.N=this.values.length,this.path=this.values.map((r,s)=>s),this.distMatrix=this.createDistMatrix(n)}static dist(e,n){const r=e[0]-n[0],s=e[1]-n[1],o=e[2]-n[2];return r*r+s*s+o*o}static async awaitWorker(e){const n=await new Promise((r,s)=>{const o=a=>{e.removeEventListener("message",o),r(a.data)},i=a=>{e.removeEventListener("error",i),s(a)};e.addEventListener("message",o),e.addEventListener("error",i)});return e.terminate(),n}createDistMatrix(e=1){const n=this.values,r=this.N,s=Array(r).fill(0).map(()=>Array(r).fill(0));for(let o=0;o<r;o++)for(let i=o+1;i<r;i++){const a=Math.pow(w.dist(n[o],n[i]),e);s[o][i]=a,s[i][o]=a}return s}totalDist(){const e=this.path,n=this.distMatrix;let r=0,s=e[0];for(let o=1,i=e.length;o<i;o++){const a=e[o];r+=n[s][a],s=a}return r}async nearestNeighborPath(e=0){const n=new Worker(new URL("/ColorSwatchesSortingResearch/assets/nearestNeighborPath-CsMNQBdk.js",import.meta.url),{type:"module"});n.postMessage({N:this.N,distMatrix:this.distMatrix,startIndex:e}),this.path=await w.awaitWorker(n)}async twoOpt(){const e=new Worker(new URL("/ColorSwatchesSortingResearch/assets/twoOpt-5OWSJuIe.js",import.meta.url),{type:"module"});e.postMessage({N:this.N,path:this.path,distMatrix:this.distMatrix}),this.path=await w.awaitWorker(e)}getValuesFromPath(e=this.path){return this.values=(e||this.path).map(n=>this.values[n])}}function ne(t,e=1){const n=t.length;if(n<=1)return 0;const r=(l,f)=>{const h=l[0]-f[0],m=l[1]-f[1],g=l[2]-f[2];return Math.sqrt(h*h+m*m+g*g)};let s=0;for(let l=1;l<n;l++)s+=Math.pow(r(t[l-1],t[l]),e);let o=0;for(let l=0;l<n;l++){let f=1/0;for(let h=0;h<n;h++){if(l===h)continue;const m=r(t[l],t[h]);m<f&&(f=m)}o+=Math.pow(f,e)}const i=Math.sqrt(765*255),a=Math.pow(i,e)*(n-1),c=(s-o)/(a-o);return Math.max(0,Math.min(1,c))}const D=t=>1/(1+Math.exp(-t*6+3)),re=t=>new Array(t).fill(0).map(()=>[~~(D(Math.random())*256),~~(D(Math.random())*256),~~(D(Math.random())*256)]);function se(t,e){const n=Math.floor(1/ne(e,3));t.querySelector(".score").textContent=String(n);const r=t.querySelector("ol");r&&(r.innerHTML="",e.forEach(([s,o,i])=>{const a=document.createElement("li");a.style.backgroundColor=`rgb(${s}, ${o}, ${i})`,r.appendChild(a)}))}function oe(t){const e=[...document.querySelector(".solutions").children],n=t.length;e.forEach(async(r,s)=>{if(r.classList.contains("not-solution"))return;let o=structuredClone(t);switch(s){case 0:break;case 1:break;case 2:o.sort(([i,a,c],[l,f,h])=>{const m=Math.atan2(Math.sqrt(3)*(a-c),2*i-a-c),g=Math.atan2(Math.sqrt(3)*(f-h),2*l-f-h);return m-g});break;case 3:o.sort(([i,a,c],[l,f,h])=>{const[,m]=b.rgb.hsl(i,a,c),[,g]=b.rgb.hsl(l,f,h);return m-g});break;case 4:o.sort(([i,a,c],[l,f,h])=>{const[,,m]=b.rgb.hsl(i,a,c),[,,g]=b.rgb.hsl(l,f,h);return m-g});break;case 5:o.sort(([i,a,c],[l,f,h])=>{const[,,m]=b.rgb.hsv(i,a,c),[,,g]=b.rgb.hsv(l,f,h);return m-g});break;case 6:o.sort(([i,a,c],[l,f,h])=>{const[m,g]=b.rgb.hsl(i,a,c),[y,p]=b.rgb.hsl(l,f,h),M=+(g>50),E=+(p>50);return M-E||m-y});break;case 7:o.sort(([i,a,c],[l,f,h])=>{const[m,,g]=b.rgb.hsl(i,a,c),[y,,p]=b.rgb.hsl(l,f,h),M=+(g>50),E=+(p>50);return M-E||m-y});break;case 8:o.sort(([i,a,c],[l,f,h])=>{const[m,,g]=b.rgb.hsv(i,a,c),[y,,p]=b.rgb.hsv(l,f,h),M=+(g>50),E=+(p>50);return M-E||m-y});break;case 9:{o.sort(([a,c,l],[f,h,m])=>{const g=Math.atan2(Math.sqrt(3)*(c-l),2*a-c-l),y=Math.atan2(Math.sqrt(3)*(h-m),2*f-h-m);return g-y});const i=new w(o);await i.twoOpt(),o=i.getValuesFromPath();break}case 10:{if(n<=1)break;const i=new w(o,3);await i.nearestNeighborPath(),o=i.getValuesFromPath();break}case 11:{if(n<=1)break;const i=new w(o,3);await i.nearestNeighborPath(),await i.twoOpt(),o=i.getValuesFromPath();break}case 12:{if(n<=1)break;const i=new w(o,3);let a=[],c=1/0;for(let l=0;l<Math.min(n,120);l++){await i.nearestNeighborPath(l);const f=i.totalDist();f<c&&(c=f,a=i.path)}o=i.getValuesFromPath(a);break}case 13:{if(n<=1)break;const i=new w(o,3);let a=[],c=1/0;for(let l=0;l<Math.min(n,120);l++){await i.nearestNeighborPath(l),await i.twoOpt();const f=i.totalDist();f<c&&(c=f,a=i.path)}o=i.getValuesFromPath(a);break}}se(r,o)})}const ie={swatchAmount:44,swatchSizePx:30},S=new z("swatches-settings",ie),x=new Wt(document.querySelector(".solutions form")),Z=x.form.elements,B={swatchAmount:Z.namedItem("settings-swatch-amount"),swatchSizePx:Z.namedItem("settings-swatch-size")};function gt(){for(const t of Object.keys(B))B[t].value=String(S.value[t])}function yt(){S.set("swatchAmount",+B.swatchAmount.value),S.set("swatchSizePx",+B.swatchSizePx.value)}function bt(){document.documentElement.style.setProperty("--swatch-size",S.value.swatchSizePx+"px");const t=re(S.value.swatchAmount);oe(t)}gt();requestAnimationFrame(()=>requestAnimationFrame(bt));x.form.addEventListener("submit",t=>{t.target instanceof HTMLFormElement&&(t.preventDefault(),yt(),bt())});const ae=x.form.querySelector('.actions button[name="settings-update"]');ae.addEventListener("click",()=>{yt(),document.documentElement.style.setProperty("--swatch-size",S.value.swatchSizePx+"px")});const ce=x.form.querySelector('.actions button[name="settings-reset"]');ce.addEventListener("click",()=>{S.reset(),gt()});x.addValidator({name:"settings-swatch-amount",method:t=>+t.value>=1&&+t.value<=999,message:"Should be between 1 and 999"});x.addValidator({name:"settings-swatch-size",method:t=>+t.value>=1&&+t.value<=3200,message:"Should be between 1 and 3200 pixels"});
